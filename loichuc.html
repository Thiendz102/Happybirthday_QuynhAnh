<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ch√∫c m·ª´ng sinh nh·∫≠t üéÇ</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Arial', sans-serif;
      overflow: hidden;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fbc2eb, #a1c4fd, #c2e9fb);
      background-size: 400% 400%;
      animation: gradientBG 20s ease infinite;
      position: relative;
    }
    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .bokeh {
      position: absolute;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      pointer-events: none;
      animation: floatBokeh 12s ease-in-out infinite alternate;
    }
    @keyframes floatBokeh {
      0% { transform: translate(0,0) scale(1);}
      50% { transform: translate(30px,-20px) scale(1.1);}
      100% { transform: translate(-20px,25px) scale(0.9);}
    }

    .balloon {
      position: absolute;
      bottom: 0;
      width: 80px;
      height: 100px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ff6b81);
      animation: float 6s ease-in-out infinite;
    }
    .balloon:after {
      content: "";
      position: absolute;
      width: 2px;
      height: 60px;
      background: #555;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
    }
    @keyframes float {
      0%,100% {transform: translateY(0);}
      50% {transform: translateY(-30px);}
    }

    .cake-container {
      position: relative;
      cursor: pointer;
      text-align: center;
      transition: opacity 1s ease;
      z-index: 10;
    }
    .cake-img {
      width: 300px;
      border-radius: 15px;
    }

    /* flame */
    .flame {
      position: absolute;
      width: 30px;
      height: 50px;
      display: none;
      pointer-events: none;
      animation: flicker 0.6s infinite alternate;
    }
    @keyframes flicker {
      0% { transform: scale(1) rotate(-2deg); opacity: 0.8; }
      100% { transform: scale(1.1) rotate(2deg); opacity: 1; }
    }

    .hide { opacity: 0; pointer-events: none; }

    /* === PHONG TH∆Ø === */
    .envelope {
      width: 180px;
      height: 120px;
      background: #ff6b81;
      border-radius: 8px;
      cursor: pointer;
      display: none;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;

      /* glow h·ªìng nh·∫°t */
      box-shadow: 0 0 20px rgba(255, 182, 193, 0.7), 
                  0 0 40px rgba(255, 182, 193, 0.5);
      animation: glowPulse 2s infinite alternate;
    }
    @keyframes glowPulse {
      from { box-shadow: 0 0 10px rgba(255, 182, 193, 0.6), 0 0 20px rgba(255, 182, 193, 0.4); }
      to   { box-shadow: 0 0 25px rgba(255, 105, 180, 0.9), 0 0 50px rgba(255, 105, 180, 0.6); }
    }
    .envelope::after {
      content: "‚ù§";
      font-size: 38px;
      color: white;
      animation: heartbeat 1s infinite;
    }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }

    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }
    .letter {
      width: 700px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.4);
      overflow: hidden;
      display: flex;
      animation: zoomIn 0.6s ease;
      position: relative;
    }
    @keyframes zoomIn {
      from {opacity: 0; transform: scale(0.7);}
      to {opacity: 1; transform: scale(1);}
    }

    .left {
      width: 35%;
      background: #ef9393;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 10px;
    }
    .left-gif {
      width: 100%;
      height: auto;
      border-radius: 15px;
      border: 4px solid #f7b9c4;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }

    .right {
      width: 65%;
      background: #fffaf0;
      color: #333;
      position: relative;
      overflow: hidden;
    }
    .carousel {
      display: flex;
      width: 100%;
      transition: transform 0.5s ease;
    }
    .page {
      min-width: 100%;
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
    }
    .page img {
      width: 85%;
  max-width: 85%;
  height: 350px;         /* t·∫•t c·∫£ ·∫£nh c√πng chi·ªÅu cao */
  object-fit: cover;     /* gi·ªØ t·ªâ l·ªá, c·∫Øt cho v·ª´a khung */
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
    .right h3 { margin: 0 0 10px 0; font-size: 24px; color: #ff4d6d; }
    .right p { font-size: 16px; line-height: 1.6; margin-bottom: 10px; }
    .sender { margin-top: 15px; font-style: italic; text-align: right; font-weight: bold; color: #444; }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 22px;
      cursor: pointer;
      color: #fff;
      background: #ff4d6d;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      text-align: center;
      line-height: 36px;
      font-weight: bold;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
      transition: 0.3s;
      z-index: 1000;
    }
    .close-btn:hover {
      background: #e63e5c;
      transform: scale(1.1);
    }

    .confetti {
      position: absolute;
      width: 8px;
      height: 14px;
      opacity: 0.8;
      animation: fall linear infinite;
    }
    @keyframes fall {
      0% {transform: translateY(-100vh) rotate(0deg);}
      100% {transform: translateY(100vh) rotate(360deg);}
    }

    .heart {
      position: fixed;
      font-size: 20px;
      color: red;
      animation: fly 3s linear forwards;
      pointer-events: none;
    }
    @keyframes fly {
      from {transform: translateY(0) scale(1); opacity: 1;}
      to {transform: translateY(-200px) scale(1.5); opacity: 0;}
    }

    /* typing + tim nh·ªè */
    .typing-container {
      font-size: 16px;
      line-height: 1.6;
      text-align: left;
      display: inline-block;
      white-space: pre-wrap;
      color: #333;
    }
    #typingHeart {
      margin-left: 4px;
      opacity: 0;
      transition: opacity 0.2s ease;
    }
  </style>
</head>
<body>
  <div class="balloon" style="left:15%; background: radial-gradient(circle at 30% 30%, #fff, #ff6b81); animation-delay: 0s;"></div>
  <div class="balloon" style="left:75%; background: radial-gradient(circle at 30% 30%, #fff, #ffcc00); animation-delay: 2s;"></div>
  <div class="balloon" style="left:50%; background: radial-gradient(circle at 30% 30%, #fff, #00c9a7); animation-delay: 4s;"></div>

  <div class="cake-container" id="cakeBox" onclick="lightCandles()">
    <img src="banhkem0nen.png" class="cake-img" alt="Birthday Cake">

    <!-- flames -->
    <img src="fire.png" class="flame" id="flame1" style="top: 72px; left: 125px;">
    <img src="fire.png" class="flame" id="flame2" style="top: 222px; left: 1px;">
    <img src="fire.png" class="flame" id="flame3" style="top: 226px; left: 24px;">
  </div>

  <div class="envelope" id="envelope"></div>

  <div class="overlay" id="overlay">
    <div class="letter">
      <div class="close-btn" onclick="closeLetter()">√ó</div>
      <div class="left">
        <img src="gifhpbd.webp" alt="Happy Birthday GIF" class="left-gif">
      </div>
      <div class="right">
        <div class="carousel" id="carousel">
          <!-- Page 1 -->
          <div class="page">
            <h3>Happy Birthday Qu·ª≥nh Anh!</h3>
            <div class="typing-container">
              <span id="typingText"></span><span id="typingHeart">‚ù§Ô∏è</span>
            </div>
            <div class="sender">Ng∆∞·ªùi g·ª≠i: Ng∆∞·ªùi th∆∞∆°ng c·ªßa em üíå</div>
          </div>
          <!-- Page 2 -->
          <div class="page"><img src="avt.jpg" alt="·∫¢nh 1"></div>
          <!-- Page 3 -->
          <div class="page"><img src="avt2.jpg" alt="·∫¢nh 2"></div>
          <!-- Page 4 -->
          <div class="page"><img src="avt3.jpg" alt="·∫¢nh 3"></div>
          <!-- Page 5 -->
         <!-- Page 5 -->
<div class="page" style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%; text-align:center;">
  <h4 style="margin-bottom:25px; color:#ff4d6d; font-size:28px; font-weight:bold;">
    C√πng ng·∫Øm sao bƒÉng v√† ∆∞·ªõc nguy·ªán c√πng anh nha üíï
  </h4>
 <a href="theend.html" 
   onclick="document.getElementById('birthdaySong').pause();" 
   target="_blank"
   style="padding:14px 32px; 
          background: linear-gradient(135deg, #ff6a88, #ff99ac); 
          color:white; text-decoration:none; border-radius:40px; 
          font-weight:bold; font-size:18px; 
          box-shadow:0 6px 18px rgba(0,0,0,0.25); transition:0.3s ease;">
  ‚ú® Let's Go ‚ú®
</a>
</div>

        </div>
      </div>
    </div>
  </div>
  
  <!-- Nh·∫°c sinh nh·∫≠t -->
   <audio id="birthdaySong" src="nhaccho.mp3"></audio>
   
  <script>
    function createBokeh() {
      const count = 15;
      for (let i = 0; i < count; i++) {
        const bokeh = document.createElement("div");
        bokeh.className = "bokeh";
        const size = 30 + Math.random() * 70;
        bokeh.style.width = size + "px";
        bokeh.style.height = size + "px";
        bokeh.style.left = Math.random() * 100 + "vw";
        bokeh.style.top = Math.random() * 100 + "vh";
        bokeh.style.animationDuration = (10 + Math.random() * 10) + "s";
        bokeh.style.animationDelay = Math.random() * 10 + "s";
        document.body.appendChild(bokeh);
      }
    }
    createBokeh();

    function lightCandles() {
      document.querySelectorAll('.flame').forEach(f => f.style.display = 'block');
      setTimeout(() => {
        document.getElementById('cakeBox').classList.add('hide');
        document.getElementById('envelope').style.display = 'flex';
      }, 3000);
    }

    document.getElementById('envelope').onclick = function() {
      document.getElementById('overlay').style.display = 'flex';
      document.getElementById('envelope').style.display = 'none';
      startConfetti();
      startHearts();
      typeMessage();

      // Ph√°t nh·∫°c sinh nh·∫≠t
      const song = document.getElementById("birthdaySong");
      song.currentTime = 0;
      song.play();
    };

    function closeLetter() {
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('envelope').style.display = 'flex';
      stopConfetti();
      stopHearts();

      // D·ª´ng nh·∫°c khi ƒë√≥ng th∆∞
      document.getElementById("birthdaySong").pause();
    }

    let confettiInterval;
    function startConfetti() {
      confettiInterval = setInterval(() => {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.background = `hsl(${Math.random()*360},100%,50%)`;
        confetti.style.animationDuration = (3+Math.random()*3)+"s";
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 6000);
      }, 200);
    }
    function stopConfetti() { clearInterval(confettiInterval); }

    let heartInterval;
    function startHearts() {
      heartInterval = setInterval(() => {
        const heart = document.createElement("div");
        heart.className = "heart";
        heart.innerText = "‚ù§Ô∏è";
        heart.style.left = Math.random()*100 + "vw";
        heart.style.bottom = "0px";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 3000);
      }, 800);
    }
    function stopHearts() { clearInterval(heartInterval); }

    let currentPage = 0;
    const carousel = document.getElementById("carousel");
    const totalPages = carousel.children.length;

    function movePage(step) {
      currentPage = (currentPage + step + totalPages) % totalPages;
      carousel.style.transform = `translateX(-${currentPage * 100}%)`;
    }

    let startX = 0;
    carousel.addEventListener("touchstart", e => { startX = e.touches[0].clientX; });
    carousel.addEventListener("touchend", e => {
      let endX = e.changedTouches[0].clientX;
      if (startX - endX > 50) movePage(1);
      if (endX - startX > 50) movePage(-1);
    });

    let isDown = false;
    let startDragX = 0;
    carousel.addEventListener("mousedown", e => { isDown = true; startDragX = e.clientX; });
    carousel.addEventListener("mouseup", e => {
      if (!isDown) return;
      let endDragX = e.clientX;
      if (startDragX - endDragX > 50) movePage(1);
      if (endDragX - startDragX > 50) movePage(-1);
      isDown = false;
    });
    carousel.addEventListener("mouseleave", () => { isDown = false; });

    // typing + tim nh·ªè
    const typingText = document.getElementById("typingText");
    const typingHeart = document.getElementById("typingHeart");
    const messageTyping = "H√¥m nay ng√†y 21/09 m·ªôt ng√†y th·∫≠t ƒë·∫∑c bi·ªát, ng√†y m√† m·ªôt thi√™n th·∫ßn ƒë√£ ch√†o ƒë·ªùiüéâ\nCh√∫c em tu·ªïi m·ªõi m√£i lu√¥n xinh ƒë·∫πp, l√∫c n√†o c≈©ng nhi·ªÅu ni·ªÅm vui, may m·∫Øn v√† h·∫°nh ph√∫c.\nMong r·∫±ng nh·ªØng ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t s·∫Ω lu√¥n ƒë·∫øn b√™n em üíñ\nEm h√£y lu√¥n m·ªâm c∆∞·ªùi th·∫≠t t∆∞∆°i nha, v√¨ n·ª• c∆∞·ªùi c·ªßa em ch√≠nh l√† m√≥n qu√† tuy·ªát v·ªùi nh·∫•t ƒë√≥‚ù§Ô∏è\nV√† lu√¥n c√≥ m·ªôt ng∆∞·ªùi ·ªü ƒë√¢y ƒë·ªÉ s·∫µn s√†ng y√™u th∆∞∆°ng em nhoa d√π trong b·∫•t c·ª© ho√†n c·∫£nh n√†o nh√≥ th√¨ tr√°i tim anh c≈©ng ch·ªâ c√≥ m·ªôt m√¨nh em th√¥iüíï";
    let idx = 0;

    function typeMessage() {
      typingText.textContent = "";
      idx = 0;
      typingHeart.style.opacity = 0;
      function typingStep() {
        if (idx < messageTyping.length) {
          typingText.textContent += messageTyping.charAt(idx);
          typingHeart.style.opacity = 1;
          idx++;
          setTimeout(typingStep, 60);
        } else {
          typingHeart.style.opacity = 0;
        }
      }
      typingStep();
    }
  </script>
</body>
</html>
