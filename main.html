<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>M√†n h√¨nh ƒëƒÉng nh·∫≠p</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: black;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      overflow-y: auto;
    }

    #fireworks {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .container {
      background: #fff3f3;
      padding: clamp(15px, 5vw, 30px);
      border-radius: 20px;
      text-align: center;
      width: 90%;
      max-width: 360px;
      position: relative;
      z-index: 2;
      margin: 20px auto;
      box-shadow: 0 0 20px rgba(255, 92, 138, 0.6);
      animation: glow 2.5s infinite alternate;
       cursor: pointer;
    }

    @keyframes glow {
      0%   { box-shadow: 0 0 15px #ff5c8a, 0 0 25px #ff99b5; }
      100% { box-shadow: 0 0 35px #ff5c8a, 0 0 50px #ff3366; }
    }

    .avatar {
      width: clamp(80px, 25vw, 120px);
      height: clamp(80px, 25vw, 120px);
      border-radius: 50%;
      overflow: hidden;
      margin: 0 auto 15px;
      border: 4px solid #ff5c8a;
    }

    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }

    .flower {
      position: absolute;
      font-size: clamp(18px, 6vw, 28px);
      top: 5%;
      animation: float 3s ease-in-out infinite alternate;
      z-index: 3;
    }

    .flower.left { left: 8%; animation-delay: 0.3s; }
    .flower.right { right: 8%; animation-delay: 0.8s; }

    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-15px) rotate(15deg); }
    }

    h2 {
      color: #ff3366;
      margin-bottom: 5px;
      font-size: clamp(18px, 5vw, 28px);
      cursor: pointer;
    }

    p {
      color: #444;
      font-size: clamp(14px, 3.5vw, 18px);
      margin-bottom: 20px;
      cursor: pointer;
    }

    .password-dots {
      display: flex;
      justify-content: center;
      margin-bottom: 15px;
    }

    .dot {
      width: clamp(10px, 3vw, 15px);
      height: clamp(10px, 3vw, 15px);
      margin: 0 5px;
      border-radius: 50%;
      border: 2px solid #ccc;
      background: #fff;
    }

    .dot.filled {
      background: #f01a53;
      border-color: #9c999a;
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .key {
      padding: clamp(8px, 3vw, 15px);
      background: #f07195;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: clamp(16px, 4vw, 20px);
      cursor: pointer;
      transition: 0.2s;
    }

    .key:active { background: #131212; }
    .key.gray { background: #999; }

    /* HI·ªÜU ·ª®NG TR√ÅI TIM BAY */
    .flying-heart {
      position: fixed;
      font-size: 24px;
      pointer-events: none;
      z-index: 1000;
      will-change: transform, opacity;
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>

  <div class="container">
    <div class="flower left">üíï</div>
    <div class="flower right">üíï</div>

    <div class="avatar">
      <img src="./avt.jpg" alt="Avatar">
    </div>

    <h2>Xin ch√†o Qu·ª≥nh Anh‚ù§Ô∏è</h2>
    <p>Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ti·∫øp t·ª•c</p>

    <div class="password-dots" id="dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>

    <div class="keypad">
      <button class="key">1</button>
      <button class="key">2</button>
      <button class="key">3</button>
      <button class="key">4</button>
      <button class="key">5</button>
      <button class="key">6</button>
      <button class="key">7</button>
      <button class="key">8</button>
      <button class="key">9</button>
      <button class="key gray" id="clear">CLR</button>
      <button class="key">0</button>
      <button class="key gray" id="del">‚å´</button>
    </div>
  </div>

  <script>
    const correctPassword = "2109";
    let input = "";

    const dots = document.querySelectorAll(".dot");
    const keys = document.querySelectorAll(".key");

    function updateDots() {
      dots.forEach((dot, i) => {
        dot.classList.toggle("filled", i < input.length);
      });
    }

    keys.forEach(key => {
      key.addEventListener("click", () => {
        if (key.id === "clear") {
          input = "";
        } else if (key.id === "del") {
          input = input.slice(0, -1);
        } else {
          if (input.length < 4) input += key.textContent;
        }
        updateDots();

        if (input.length === 4) {
          if (input === correctPassword) {
            window.location.href = "matran.html";
          } else {
            alert("Sai m·∫≠t kh·∫©u! Em h√£y nh·∫≠p l·∫°i nh√≥‚ù§Ô∏è");
            input = "";
            updateDots();
          }
        }
      });
    });

    /* PH√ÅO HOA */
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    window.onresize = () => {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    };

    function random(min, max) {
      return Math.random() * (max - min) + min;
    }

    class Firework {
      constructor() {
        this.x = random(0, w);
        this.y = h;
        this.targetY = random(h / 4, h / 2);
        this.speed = random(3, 5);
        this.size = 2;
        this.color = `hsl(${random(0, 360)},100%,50%)`;
        this.exploded = false;
        this.particles = [];
      }
      update() {
        if (!this.exploded) {
          this.y -= this.speed;
          if (this.y <= this.targetY) {
            this.exploded = true;
            this.explode();
          }
        }
        this.particles.forEach(p => p.update());
      }
      draw() {
        if (!this.exploded) {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
        this.particles.forEach(p => p.draw());
      }
      explode() {
        const count = 50;
        for (let i = 0; i < count; i++) {
          this.particles.push(new Particle(this.x, this.y, this.color));
        }
      }
    }

    class Particle {
      constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.size = 2;
        this.speedX = random(-3, 3);
        this.speedY = random(-3, 3);
        this.color = color;
        this.life = 100;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        this.life--;
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
    }

    let fireworks = [];
    function animate() {
      ctx.fillStyle = "rgba(0,0,0,0.2)";
      ctx.fillRect(0, 0, w, h);

      if (Math.random() < 0.05) {
        fireworks.push(new Firework());
      }

      fireworks.forEach((fw, i) => {
        fw.update();
        fw.draw();
        if (fw.exploded && fw.particles.every(p => p.life <= 0)) {
          fireworks.splice(i, 1);
        }
      });

      requestAnimationFrame(animate);
    }
    animate();

    /* TR√ÅI TIM BAY M∆Ø·ª¢T */
    function createHeart(x, y) {
      const heart = document.createElement("div");
      heart.className = "flying-heart";

      // Random emoji tim nhi·ªÅu m√†u
      const hearts = ["üíñ", "üíï", "‚ù§Ô∏è", "üíì", "üíò"];
      heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];

      document.body.appendChild(heart);

      let posX = x;
      let posY = y;
      let angle = Math.random() * Math.PI - Math.PI / 2;
      let speedX = Math.cos(angle) * 0.5; // bay ch·∫≠m
      let speedY = -2 - Math.random() * 1.2; // bay ch·∫≠m l√™n
      let gravity = 0.02;
      let opacity = 1;
      let rotation = 0;

      function animateHeart() {
        posX += speedX;
        posY += speedY;
        speedY += gravity;
        rotation += 2;
        opacity -= 0.004;

        heart.style.transform = `translate(${posX}px, ${posY}px) rotate(${rotation}deg)`;
        heart.style.opacity = opacity;

        if (opacity > 0) {
          requestAnimationFrame(animateHeart);
        } else {
          heart.remove();
        }
      }

      heart.style.left = "0px";
      heart.style.top = "0px";
      heart.style.transform = `translate(${posX}px, ${posY}px)`;
      animateHeart();
    }

    document.addEventListener("click", e => {
      createHeart(e.clientX, e.clientY);
    });

    document.addEventListener("touchstart", e => {
      const t = e.touches[0];
      createHeart(t.clientX, t.clientY);
    });
  </script>
</body>
</html>
